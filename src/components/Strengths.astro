---
import Card from "./Card.astro";
import { getLangFromUrl, useTranslations } from "../i18n/utils";

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
---

<section
    id={t("nav.strenghts")}
    class="bg-gradient-to-b from-primary/50 to-base-100 py-6 lg:pb-24 min-h-screen place-items-center"
>
    <div
        class="max-w-6xl grid grid-cols-1 lg:grid-cols-2 mx-auto p-4 gap-8 lg:gap-20 place-items-center"
    >
        <Card
            title={t("strengths.card1.title")}
            body={t("strengths.card1.content")}
            image="/images/dereito_penal.webp"
            image_alt={t("alt.strenghts.card1.image")}
            crime_list={t("strengths.card1.list")}
        />

        <Card
            title={t("strengths.card2.title")}
            body={t("strengths.card2.content")}
            image="/images/dereito_penitenciario.webp"
            image_alt={t("alt.strenghts.card2.image")}
            crime_list={t("strengths.card2.list")}
        />

        <Card
            title={t("strengths.card3.title")}
            body={t("strengths.card3.content")}
            image="/images/dereito_de_familia.webp"
            image_alt={t("alt.strenghts.card3.image")}
            crime_list={t("strengths.card3.list")}
        />

        <Card
            title={t("strengths.card4.title")}
            body={t("strengths.card4.content")}
            image="/images/dereito_administrativo.webp"
            image_alt={t("alt.strenghts.card4.image")}
            crime_list={t("strengths.card4.list")}
        />
    </div>
</section>

<script is:inline>
    document.querySelectorAll(".collapse").forEach((collapse) => {
        collapse.addEventListener("click", () => {
            const input = collapse.querySelector('input[type="checkbox"]');
            const seeMore = collapse.querySelector(".see-more");

            // If no checkbox or no see-more button, skip
            if (!input || !seeMore) return;

            const seeMoreText = seeMore.dataset.seeMore;
            const seeLessText = seeMore.dataset.seeLess;

            function updateText() {
                seeMore.textContent = input.checked ? seeLessText : seeMoreText;
            }

            // Run once on load
            updateText();

            // DaisyUI collapse toggles when clicking inside
            collapse.addEventListener("click", () => {
                // Small timeout so input.checked updates AFTER click
                setTimeout(updateText, 0);
            });
        });
    });
</script>
